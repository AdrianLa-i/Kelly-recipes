<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶å¸¸ç¾å‘³å››é‡å¥ - äº’åŠ¨é£Ÿè°±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .serif {
            font-family: 'Noto Serif SC', serif;
        }
        .step-item {
            opacity: 0;
            transform: translateX(-20px);
            animation: slideIn 0.5s forwards;
        }
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .ingredient-row {
            transition: all 0.3s ease;
        }
        .ingredient-row:hover {
            background-color: rgba(59, 130, 246, 0.05);
        }
        
        /* Custom Slider with Black Track */
        .servings-slider {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
            position: relative;
        }
        .servings-slider::-webkit-slider-runnable-track {
            background: #1f2937;
            height: 6px;
            border-radius: 3px;
            border: none;
        }
        .servings-slider::-moz-range-track {
            background: #1f2937;
            height: 6px;
            border-radius: 3px;
            border: none;
        }
        .servings-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #3b82f6;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            margin-top: -9px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            border: 2px solid white;
        }
        .servings-slider::-moz-range-thumb {
            background: #3b82f6;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            border: 2px solid white;
            cursor: pointer;
        }
        .servings-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }
        
        .cooking-timer {
            font-variant-numeric: tabular-nums;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Image styling */
        .selector-image {
            width: 64px;
            height: 64px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .dish-selector:hover .selector-image {
            transform: scale(1.05);
        }
        
        .dish-selector.active .selector-image {
            border-color: currentColor;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-fallback {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body class="min-h-screen pb-20">

    <!-- Hero Section -->
    <header class="bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 text-white py-12 px-4 shadow-2xl relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="max-w-6xl mx-auto relative z-10 text-center">
            <h1 class="serif text-4xl md:text-6xl font-bold mb-4 tracking-wide">å•Šç§‹å®¶å¸¸èœé£Ÿè°±</h1>
            <p class="text-lg md:text-xl opacity-90 font-light">æ ¹æ®äººæ•°è‡ªåŠ¨è°ƒæ•´ä»½é‡ï¼Œè®©çƒ¹é¥ªå˜å¾—ç®€å•</p>
        </div>
        <div class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-gray-50 to-transparent"></div>
    </header>

    <!-- Controls Section -->
    <div class="max-w-6xl mx-auto px-4 -mt-8 relative z-20">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex-1 w-full">
                    <label class="block text-gray-700 font-semibold mb-3 text-lg">ç”¨é¤äººæ•°</label>
                    <div class="flex items-center gap-4">
                        <span class="text-3xl font-bold text-blue-600 w-12 text-center" id="servingsDisplay">4</span>
                        <span class="text-gray-500 font-medium">äººä»½</span>
                        <div class="flex-1 mx-4 relative">
                            <div class="absolute top-1/2 left-0 right-0 h-1.5 bg-gray-800 rounded-full -translate-y-1/2 pointer-events-none"></div>
                            <input type="range" min="1" max="12" value="4" class="servings-slider w-full relative z-10" id="servingsSlider">
                        </div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 mt-2 px-16 font-medium">
                        <span>1äºº</span>
                        <span>6äºº</span>
                        <span>12äºº</span>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="quickSet(2)" class="px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 transition text-sm font-medium border border-gray-300">åŒäººé¤</button>
                    <button onclick="quickSet(4)" class="px-4 py-2 rounded-full bg-blue-100 text-blue-700 hover:bg-blue-200 transition text-sm font-medium border border-blue-300">å®¶åº­é¤</button>
                    <button onclick="quickSet(8)" class="px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 transition text-sm font-medium border border-gray-300">èšé¤</button>
                </div>
            </div>
        </div>

        <!-- Dish Selector with Images -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <button onclick="selectDish(0)" class="dish-selector p-4 rounded-xl bg-white shadow-md hover:shadow-lg transition text-center border-2 border-transparent hover:border-orange-400" data-index="0">
                <img src="./maxresdefault.jpg" alt="å°é…¥è‚‰" class="selector-image mx-auto mb-3 object-cover" onerror="this.parentElement.innerHTML='<div class=\'selector-image mx-auto mb-3 image-fallback\'>ğŸ¥©</div><div class=\'font-bold text-gray-800 text-sm md:text-base\'>å°é…¥è‚‰</div>'">
                <div class="font-bold text-gray-800 text-sm md:text-base">å°é…¥è‚‰</div>
            </button>
            <button onclick="selectDish(1)" class="dish-selector p-4 rounded-xl bg-white shadow-md hover:shadow-lg transition text-center border-2 border-transparent hover:border-blue-400" data-index="1">
                <img src="./WhatsApp Image 2026-02-15 at 13.20.07.jpeg" alt="å’¸è›‹é»„ç‚’é±¿é±¼" class="selector-image mx-auto mb-3 object-cover" onerror="this.parentElement.innerHTML='<div class=\'selector-image mx-auto mb-3 image-fallback\'>ğŸ¦‘</div><div class=\'font-bold text-gray-800 text-sm md:text-base\'>å’¸è›‹é»„ç‚’é±¿é±¼</div>'">
                <div class="font-bold text-gray-800 text-sm md:text-base">å’¸è›‹é»„ç‚’é±¿é±¼</div>
            </button>
            <button onclick="selectDish(2)" class="dish-selector p-4 rounded-xl bg-white shadow-md hover:shadow-lg transition text-center border-2 border-transparent hover:border-yellow-400" data-index="2">
                <img src="./photo.jpg" alt="é¦™ç±³é¥­" class="selector-image mx-auto mb-3 object-cover" onerror="this.parentElement.innerHTML='<div class=\'selector-image mx-auto mb-3 image-fallback\'>ğŸš</div><div class=\'font-bold text-gray-800 text-sm md:text-base\'>é¦™ç±³é¥­</div>'">
                <div class="font-bold text-gray-800 text-sm md:text-base">é¦™ç±³é¥­</div>
            </button>
            <button onclick="selectDish(3)" class="dish-selector p-4 rounded-xl bg-white shadow-md hover:shadow-lg transition text-center border-2 border-transparent hover:border-green-400" data-index="3">
                <img src="./images.jpg" alt="è²è—•èŠ±ç”Ÿæ±¤" class="selector-image mx-auto mb-3 object-cover" onerror="this.parentElement.innerHTML='<div class=\'selector-image mx-auto mb-3 image-fallback\'>ğŸ¥œ</div><div class=\'font-bold text-gray-800 text-sm md:text-base\'>è²è—•èŠ±ç”Ÿæ±¤</div>'">
                <div class="font-bold text-gray-800 text-sm md:text-base">è²è—•èŠ±ç”Ÿæ±¤</div>
            </button>
        </div>

        <!-- Main Content Area -->
        <div id="recipeContainer" class="bg-white rounded-3xl shadow-2xl overflow-hidden min-h-[600px]">
            <!-- Content injected by JavaScript -->
        </div>
    </div>

    <script>
        // Local image paths - using ./ for same folder
        const imagePaths = [
            './maxresdefault.jpg',
            './WhatsApp Image 2026-02-15 at 13.20.07.jpeg',
            './photo.jpg',
            './images.jpg'
        ];

        // Recipe Data
        const recipes = [
            {
                name: "å°é…¥è‚‰",
                image: './maxresdefault.jpg',
                color: "orange",
                baseServings: 4,
                time: "40åˆ†é’Ÿ",
                difficulty: "ä¸­ç­‰",
                calories: "320 kcal/ä»½",
                description: "å¤–é…¥é‡Œå«©ï¼Œé¦™æ°”å››æº¢çš„ç»å…¸å·èœï¼Œé‡‘é»„é…¥è„†çš„å£æ„Ÿè®©äººæ¬²ç½¢ä¸èƒ½",
                ingredients: [
                    { name: "äº”èŠ±è‚‰", amount: 400, unit: "g", category: "ä¸»æ–™" },
                    { name: "é¸¡è›‹", amount: 2, unit: "ä¸ª", category: "è¾…æ–™" },
                    { name: "çº¢è–¯æ·€ç²‰", amount: 80, unit: "g", category: "è¾…æ–™" },
                    { name: "èŠ±æ¤’ç²‰", amount: 5, unit: "g", category: "è°ƒæ–™" },
                    { name: "æ–™é…’", amount: 15, unit: "ml", category: "è°ƒæ–™" },
                    { name: "ç›", amount: 5, unit: "g", category: "è°ƒæ–™" },
                    { name: "é£Ÿç”¨æ²¹", amount: 500, unit: "ml", category: "å…¶ä»–", note: "å®è€—çº¦50ml" }
                ],
                steps: [
                    { title: "è…Œåˆ¶è‚‰ç‰‡", desc: "äº”èŠ±è‚‰åˆ‡æˆ0.5cmåšçš„ç‰‡ï¼ŒåŠ å…¥æ–™é…’ã€ç›ã€èŠ±æ¤’ç²‰è…Œåˆ¶15åˆ†é’Ÿ", time: 15, tip: "åˆ‡è–„ä¸€ç‚¹æ›´é…¥è„†" },
                    { title: "è°ƒåˆ¶é¢ç³Š", desc: "é¸¡è›‹æ‰“æ•£ï¼ŒåŠ å…¥çº¢è–¯æ·€ç²‰æ…æ‹Œæˆç³ŠçŠ¶ï¼Œé™ç½®10åˆ†é’Ÿ", time: 10, tip: "é¢ç³Šè¦æµ“ç¨ èƒ½æŒ‚ä½è‚‰" },
                    { title: "è£¹ç³Š", desc: "å°†è…Œå¥½çš„è‚‰ç‰‡å‡åŒ€è£¹ä¸Šé¢ç³Š", time: 5, tip: "ç¡®ä¿æ¯ç‰‡è‚‰éƒ½è£¹æ»¡" },
                    { title: "åˆç‚¸å®šå‹", desc: "æ²¹æ¸©160Â°Cï¼Œä¸‹å…¥è‚‰ç‰‡ç‚¸è‡³å¾®é»„æå‡º", time: 5, tip: "ä¸è¦ä¸€æ¬¡æ”¾å¤ªå¤šï¼Œé¿å…ç²˜è¿" },
                    { title: "å¤ç‚¸é…¥è„†", desc: "æ²¹æ¸©å‡è‡³180Â°Cï¼Œå¤ç‚¸30ç§’è‡³é‡‘é»„é…¥è„†", time: 3, tip: "é«˜æ¸©å¤ç‚¸æ˜¯é…¥è„†çš„å…³é”®" },
                    { title: "è£…ç›˜", desc: "æå‡ºæ²¥æ²¹ï¼Œæ’’ä¸Šæ¤’ç›æˆ–è¾£æ¤’ç²‰å³å¯", time: 2, tip: "è¶çƒ­åƒå£æ„Ÿæœ€ä½³" }
                ]
            },
            {
                name: "å’¸è›‹é»„ç‚’é±¿é±¼",
                image: './WhatsApp Image 2026-02-15 at 13.20.07.jpeg',
                color: "blue",
                baseServings: 4,
                time: "20åˆ†é’Ÿ",
                difficulty: "ç®€å•",
                calories: "180 kcal/ä»½",
                description: "å’¸é¦™é²œç¾ï¼Œé±¿é±¼Qå¼¹ä¸‹é¥­ç¥å™¨ï¼Œå’¸è›‹é»„çš„æ²™ç³¯å£æ„Ÿå®Œç¾åŒ…è£¹é±¿é±¼",
                ingredients: [
                    { name: "é²œé±¿é±¼", amount: 500, unit: "g", category: "ä¸»æ–™" },
                    { name: "å’¸è›‹é»„", amount: 4, unit: "ä¸ª", category: "ä¸»æ–™" },
                    { name: "æ´‹è‘±", amount: 1, unit: "ä¸ª", category: "è¾…æ–™" },
                    { name: "é’è‘±", amount: 3, unit: "æ ¹", category: "è¾…æ–™" },
                    { name: "å§œç‰‡", amount: 5, unit: "ç‰‡", category: "è¾…æ–™" },
                    { name: "æ–™é…’", amount: 10, unit: "ml", category: "è°ƒæ–™" },
                    { name: "ç›", amount: 2, unit: "g", category: "è°ƒæ–™", note: "å°‘è®¸ï¼Œè›‹é»„å·²æœ‰å’¸å‘³" }
                ],
                steps: [
                    { title: "å¤„ç†é±¿é±¼", desc: "é±¿é±¼æ´—å‡€åˆ‡åœˆï¼Œæ²¸æ°´åŠ æ–™é…’ç„¯çƒ«30ç§’æå‡º", time: 5, tip: "æ—¶é—´ä¸å®œé•¿ï¼Œä¿æŒé²œå«©" },
                    { title: "å‡†å¤‡é…æ–™", desc: "æ´‹è‘±åˆ‡å—ï¼Œé’è‘±åˆ‡æ®µï¼Œå’¸è›‹é»„å‹ç¢å¤‡ç”¨", time: 5, tip: "è›‹é»„è¶Šç¢è¶Šå®¹æ˜“èµ·æ³¡" },
                    { title: "ç‚’è›‹é»„", desc: "çƒ­æ²¹å°ç«ï¼Œä¸‹å’¸è›‹é»„ç‚’è‡³èµ·æ³¡å‡ºæ²™", time: 3, tip: "å¿…é¡»å°ç«ï¼Œé¿å…ç³Šé”…" },
                    { title: "ç‚’é±¿é±¼", desc: "åŠ å…¥é±¿é±¼å¿«é€Ÿç¿»ç‚’ï¼Œè®©è›‹é»„å‡åŒ€åŒ…è£¹", time: 2, tip: "å¤§ç«å¿«ç‚’ä¿æŒå¼¹æ€§" },
                    { title: "åŠ é…æ–™", desc: "åŠ å…¥æ´‹è‘±ã€å§œç‰‡ç¿»ç‚’è‡³æ´‹è‘±å˜è½¯", time: 3, tip: "æ´‹è‘±ä¿æŒä¸€ç‚¹è„†åº¦æ›´å¥½åƒ" },
                    { title: "å‡ºé”…", desc: "æ’’å…¥è‘±æ®µï¼Œå¿«é€Ÿç‚’åŒ€è£…ç›˜", time: 2, tip: "è‘±è¦æœ€åæ”¾ä¿æŒç¿ ç»¿" }
                ]
            },
            {
                name: "é¦™ç±³é¥­",
                image: './photo.jpg',
                color: "yellow",
                baseServings: 4,
                time: "30åˆ†é’Ÿ",
                difficulty: "ç®€å•",
                calories: "150 kcal/ä»½",
                description: "ç²’ç²’åˆ†æ˜ï¼Œè½¯ç³¯é¦™ç”œçš„å®Œç¾ç±³é¥­ï¼Œæ¯ä¸€å£éƒ½æ˜¯å¹¸ç¦çš„å‘³é“",
                ingredients: [
                    { name: "å¤§ç±³", amount: 300, unit: "g", category: "ä¸»æ–™" },
                    { name: "æ¸…æ°´", amount: 450, unit: "ml", category: "å…¶ä»–", note: "ç±³æ°´æ¯”ä¾‹1:1.5" },
                    { name: "é£Ÿç”¨æ²¹", amount: 5, unit: "ml", category: "å…¶ä»–", note: "å¯é€‰ï¼Œå¢åŠ å…‰æ³½" },
                    { name: "ç›", amount: 2, unit: "g", category: "è°ƒæ–™", note: "å¯é€‰" }
                ],
                steps: [
                    { title: "æ·˜ç±³", desc: "å¤§ç±³è½»æŸ”æ·˜æ´—2-3æ¬¡ï¼Œè‡³æ°´åŸºæœ¬æ¸…æ¾ˆ", time: 3, tip: "ä¸è¦è¿‡åº¦æ“æ´—ï¼Œä¿ç•™è¥å…»" },
                    { title: "æµ¸æ³¡", desc: "åŠ æ°´æµ¸æ³¡20åˆ†é’Ÿï¼Œè®©ç±³ç²’å……åˆ†å¸æ°´", time: 20, tip: "æµ¸æ³¡åç±³é¥­æ›´é¥±æ»¡" },
                    { title: "ç…®é¥­", desc: "æ”¾å…¥ç”µé¥­ç…²ï¼ŒæŒ‰æ ‡å‡†ç…®é¥­ç¨‹åº", time: 25, tip: "è·³é—¸åä¸è¦ç«‹å³å¼€ç›–" },
                    { title: "ç„–é¥­", desc: "ä¿æ¸©çŠ¶æ€ç„–10åˆ†é’Ÿï¼Œè®©æ°´åˆ†å‡åŒ€åˆ†å¸ƒ", time: 10, tip: "ç„–é¥­æ­¥éª¤ä¸å¯çœç•¥" },
                    { title: "ç¿»æ¾", desc: "ç”¨é¥­å‹ºè½»è½»ç¿»æ¾ï¼Œæ•£å»å¤šä½™æ°´æ±½", time: 2, tip: "åŠ¨ä½œè¦è½»ï¼Œé¿å…å‹ç¢ç±³ç²’" }
                ]
            },
            {
                name: "è²è—•èŠ±ç”Ÿæ±¤",
                image: './images.jpg',
                color: "green",
                baseServings: 4,
                time: "90åˆ†é’Ÿ",
                difficulty: "ç®€å•",
                calories: "120 kcal/ä»½",
                description: "æ¸…ç”œæ»‹æ¶¦ï¼Œè¡¥è¡€å…»é¢œçš„å…»ç”Ÿæ±¤å“ï¼Œè²è—•ç²‰ç³¯èŠ±ç”Ÿé¦™æµ“",
                ingredients: [
                    { name: "è²è—•", amount: 400, unit: "g", category: "ä¸»æ–™" },
                    { name: "èŠ±ç”Ÿ", amount: 100, unit: "g", category: "ä¸»æ–™" },
                    { name: "çº¢æ£", amount: 6, unit: "é¢—", category: "è¾…æ–™" },
                    { name: "æ¸æ", amount: 10, unit: "g", category: "è¾…æ–™" },
                    { name: "çŒªéª¨/æ’éª¨", amount: 300, unit: "g", category: "ä¸»æ–™", note: "å¯é€‰ï¼Œç´ ç‰ˆå¯ä¸åŠ " },
                    { name: "å§œç‰‡", amount: 3, unit: "ç‰‡", category: "è¾…æ–™" },
                    { name: "ç›", amount: 5, unit: "g", category: "è°ƒæ–™" }
                ],
                steps: [
                    { title: "æµ¸æ³¡èŠ±ç”Ÿ", desc: "èŠ±ç”Ÿæå‰æµ¸æ³¡2å°æ—¶ï¼ˆæˆ–å¼€æ°´æµ¸æ³¡30åˆ†é’Ÿï¼‰", time: 5, tip: "æå‰å‡†å¤‡ï¼Œç¼©çŸ­ç…®æ±¤æ—¶é—´" },
                    { title: "å¤„ç†è²è—•", desc: "è²è—•å»çš®åˆ‡æ»šåˆ€å—ï¼Œæ³¡æ·¡ç›æ°´é˜²æ°§åŒ–", time: 5, tip: "åˆ‡å¤§å—è€ç…®ï¼Œå£æ„Ÿç²‰ç³¯" },
                    { title: "ç„¯æ°´", desc: "çŒªéª¨å†·æ°´ä¸‹é”…ç„¯æ°´å»è¡€æ²«ï¼Œæ´—å‡€å¤‡ç”¨", time: 10, tip: "å†·æ°´ä¸‹é”…æ‰èƒ½å»å‡€è¡€æ°´" },
                    { title: "ç‚–ç…®", desc: "æ‰€æœ‰ææ–™ï¼ˆé™¤æ¸æï¼‰å…¥ç ‚é”…ï¼Œå¤§ç«çƒ§å¼€è½¬å°ç«ç…²1å°æ—¶", time: 60, tip: "å°ç«æ…¢ç…²å‘³é“æ›´æµ“éƒ" },
                    { title: "åŠ æ¸æ", desc: "åŠ å…¥æ¸æç»§ç»­ç…²10åˆ†é’Ÿ", time: 10, tip: "æ¸æä¸å®œä¹…ç…®ï¼Œä¿æŒè¥å…»" },
                    { title: "è°ƒå‘³", desc: "åŠ ç›è°ƒå‘³ï¼Œå…³ç«ç„–5åˆ†é’Ÿå³å¯", time: 5, tip: "ç›æœ€åæ”¾ï¼Œè‚‰è´¨æ›´å«©" }
                ]
            }
        ];

        let currentServings = 4;
        let currentDish = 0;
        let activeTimers = {};

        function init() {
            updateServingsDisplay();
            renderDish();
        }

        function quickSet(num) {
            currentServings = num;
            document.getElementById('servingsSlider').value = num;
            updateServingsDisplay();
            renderDish();
        }

        document.getElementById('servingsSlider').addEventListener('input', (e) => {
            currentServings = parseInt(e.target.value);
            updateServingsDisplay();
            renderDish();
        });

        function updateServingsDisplay() {
            document.getElementById('servingsDisplay').textContent = currentServings;
        }

        function selectDish(index) {
            currentDish = index;
            document.querySelectorAll('.dish-selector').forEach((el, i) => {
                if (i === index) {
                    el.classList.add('ring-4', 'ring-opacity-50', 
                        index === 0 ? 'ring-orange-400' :
                        index === 1 ? 'ring-blue-400' :
                        index === 2 ? 'ring-yellow-400' : 'ring-green-400'
                    );
                    el.classList.add('bg-gray-50', 'active');
                } else {
                    el.classList.remove('ring-4', 'ring-opacity-50', 'ring-orange-400', 'ring-blue-400', 'ring-yellow-400', 'ring-green-400', 'bg-gray-50', 'active');
                }
            });
            renderDish();
        }

        function calculateAmount(baseAmount, unit) {
            const ratio = currentServings / 4;
            let calculated = baseAmount * ratio;
            
            if (unit === 'g' || unit === 'ml') {
                calculated = Math.round(calculated / 5) * 5;
            } else if (unit === 'ä¸ª' || unit === 'ç‰‡' || unit === 'é¢—' || unit === 'æ ¹') {
                calculated = Math.round(calculated);
                if (calculated < 1) calculated = 1;
            }
            return calculated;
        }

        function renderDish() {
            const recipe = recipes[currentDish];
            const container = document.getElementById('recipeContainer');
            
            const colorClasses = {
                orange: 'from-orange-400 to-red-500',
                blue: 'from-blue-400 to-indigo-500',
                yellow: 'from-yellow-400 to-orange-500',
                green: 'from-green-400 to-teal-500'
            };

            const borderColors = {
                orange: 'border-orange-500',
                blue: 'border-blue-500',
                yellow: 'border-yellow-500',
                green: 'border-green-500'
            };

            const html = `
                <div class="fade-in">
                    <div class="relative h-64 md:h-80 overflow-hidden bg-gray-200">
                        <div class="absolute inset-0 bg-gradient-to-r ${colorClasses[recipe.color]} opacity-90 z-10"></div>
                        <img src="${recipe.image}" 
                             class="hero-image opacity-40 mix-blend-overlay" 
                             alt="${recipe.name}"
                             onerror="this.style.display='none'; this.parentElement.querySelector('.image-fallback-bg').style.display='flex';">
                        <div class="image-fallback-bg absolute inset-0 ${colorClasses[recipe.color]} hidden items-center justify-center text-white text-6xl font-bold z-0">
                            ${recipe.name[0]}
                        </div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent z-20"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-6 md:p-10 z-30 text-white">
                            <div class="max-w-4xl">
                                <div class="flex items-center gap-3 mb-3">
                                    <span class="px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm font-medium border border-white/30">${recipe.difficulty}</span>
                                    <span class="px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm font-medium border border-white/30">${recipe.time}</span>
                                </div>
                                <h2 class="serif text-3xl md:text-5xl font-bold mb-3">${recipe.name}</h2>
                                <p class="text-lg opacity-95 leading-relaxed max-w-2xl">${recipe.description}</p>
                                <div class="mt-4 flex items-center gap-2 text-sm font-medium bg-white/10 inline-flex px-4 py-2 rounded-full backdrop-blur-sm border border-white/20">
                                    <span>ğŸ‘¥</span>
                                    <span>å½“å‰ä»½é‡ï¼š${currentServings}äººä»½</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-0">
                        <div class="p-8 bg-gray-50 border-r border-gray-200">
                            <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                <span class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-lg">ğŸ“</span>
                                é£Ÿææ¸…å•
                            </h3>
                            
                            ${['ä¸»æ–™', 'è¾…æ–™', 'è°ƒæ–™', 'å…¶ä»–'].map(cat => {
                                const items = recipe.ingredients.filter(i => i.category === cat);
                                if (items.length === 0) return '';
                                return `
                                    <div class="mb-6">
                                        <h4 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2">
                                            <span class="w-2 h-2 rounded-full bg-${recipe.color}-500"></span>
                                            ${cat}
                                        </h4>
                                        <div class="space-y-2">
                                            ${items.map(ing => `
                                                <div class="ingredient-row flex justify-between items-center p-4 bg-white rounded-xl border border-gray-200 shadow-sm">
                                                    <span class="font-medium text-gray-700 text-lg">${ing.name}</span>
                                                    <div class="text-right">
                                                        <span class="font-bold text-${recipe.color}-600 text-xl">${calculateAmount(ing.amount, ing.unit)}</span>
                                                        <span class="text-gray-500 text-sm ml-1 font-medium">${ing.unit}</span>
                                                        ${ing.note ? `<div class="text-xs text-gray-400 mt-1 max-w-[150px]">${ing.note}</div>` : ''}
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                            
                            <div class="mt-8 p-4 bg-${recipe.color}-50 rounded-xl border border-${recipe.color}-200">
                                <div class="flex items-center gap-2 text-${recipe.color}-800 font-bold mb-2">
                                    <span>ğŸ’¡</span>
                                    <span>çƒ¹é¥ªå°è´´å£«</span>
                                </div>
                                <p class="text-sm text-${recipe.color}-700 leading-relaxed">
                                    æœ¬é£Ÿè°±åŸºäº${recipe.baseServings}äººä»½è®¾è®¡ï¼Œå½“å‰å·²è‡ªåŠ¨è°ƒæ•´ä¸º${currentServings}äººä»½ã€‚æ‰€æœ‰é£Ÿææ¯”ä¾‹å·²é‡æ–°è®¡ç®—ï¼Œè¯·æŒ‰éœ€å‡†å¤‡ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="p-8">
                            <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                <span class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-lg">ğŸ‘¨â€ğŸ³</span>
                                çƒ¹é¥ªæ­¥éª¤
                            </h3>
                            
                            <div class="space-y-4">
                                ${recipe.steps.map((step, idx) => `
                                    <div class="step-item bg-white border-l-4 ${borderColors[recipe.color]} rounded-r-xl p-5 shadow-sm hover:shadow-md transition relative group" style="animation-delay: ${idx * 0.1}s">
                                        <div class="flex items-start gap-4">
                                            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-${recipe.color}-100 text-${recipe.color}-600 font-bold flex items-center justify-center text-lg border-2 border-${recipe.color}-200">
                                                ${idx + 1}
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <h4 class="font-bold text-gray-800 mb-2 text-lg">${step.title}</h4>
                                                <p class="text-gray-600 leading-relaxed mb-3">${step.desc}</p>
                                                <div class="flex items-center justify-between flex-wrap gap-2">
                                                    <span class="inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-full font-medium">
                                                        ğŸ’¡ ${step.tip}
                                                    </span>
                                                    <button onclick="toggleTimer(${idx}, ${step.time})" id="timer-${idx}" class="text-xs px-4 py-2 rounded-full bg-gray-100 hover:bg-${recipe.color}-100 text-gray-600 hover:text-${recipe.color}-600 transition flex items-center gap-2 font-medium border border-gray-200 hover:border-${recipe.color}-300">
                                                        <span>â±ï¸</span>
                                                        <span class="cooking-timer">${step.time}åˆ†é’Ÿ</span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="timer-display-${idx}" class="hidden mt-4 p-4 bg-gray-900 text-white rounded-lg text-center font-mono text-2xl shadow-inner">
                                            00:00
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function toggleTimer(stepIndex, minutes) {
            const btn = document.getElementById(`timer-${stepIndex}`);
            const display = document.getElementById(`timer-display-${stepIndex}`);
            
            if (activeTimers[stepIndex]) {
                clearInterval(activeTimers[stepIndex].interval);
                delete activeTimers[stepIndex];
                btn.classList.remove('bg-red-100', 'text-red-600', 'border-red-300');
                btn.classList.add('bg-gray-100', 'text-gray-600', 'border-gray-200');
                display.classList.add('hidden');
                btn.querySelector('span:last-child').textContent = `${minutes}åˆ†é’Ÿ`;
            } else {
                let seconds = minutes * 60;
                display.classList.remove('hidden');
                btn.classList.remove('bg-gray-100', 'text-gray-600', 'border-gray-200');
                btn.classList.add('bg-red-100', 'text-red-600', 'border-red-300');
                
                activeTimers[stepIndex] = {
                    interval: setInterval(() => {
                        seconds--;
                        const mins = Math.floor(seconds / 60);
                        const secs = seconds % 60;
                        display.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                        btn.querySelector('span:last-child').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                        
                        if (seconds <= 0) {
                            clearInterval(activeTimers[stepIndex].interval);
                            delete activeTimers[stepIndex];
                            display.textContent = "æ—¶é—´åˆ°ï¼";
                            display.classList.remove('bg-gray-900');
                            display.classList.add('bg-green-600');
                            btn.querySelector('span:last-child').textContent = "å®Œæˆ";
                            display.style.animation = "pulse 0.5s 4";
                        }
                    }, 1000)
                };
            }
        }

        // Initialize
        init();
        selectDish(0);
    </script>
</body>
</html>